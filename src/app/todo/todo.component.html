<div class="todo-app">
    <h1>ToDo Lista</h1>
    <div class="container">
        <!-- Bal oldali oszlop: Új feladat rögzítése -->
        <div class="create">
            <mat-card appearance="outlined">
                <mat-card-header>
                    Új feladat rögzítése
                </mat-card-header>
                <mat-card-content>
                    <form>
                        <mat-form-field>
                            <mat-label>Feladat</mat-label>
                            <input matInput [(ngModel)]="newTaskTitle" name="newTaskTitle" />
                        </mat-form-field>

                        <mat-form-field>
                            <mat-label>Szint</mat-label>
                            <mat-select [(ngModel)]="selectedOption" name="selectedOption">
                                <mat-option *ngFor="let level of levels" [value]="level.id">
                                    {{ level.name }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field>
                            <mat-label>Határidő</mat-label>
                            <input matInput [matDatepicker]="picker" [(ngModel)]="deadLine" name="deadLine">
                            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>

                        <button type="button" (click)="addTask()" mat-raised-button color="accent">Hozzáadás</button>
                    </form>
                </mat-card-content>
            </mat-card>
        </div>

        <!-- Jobb oldali oszlop: Feladat lista -->
        <div class="list">

            <ul>
                <li *ngFor="let task of tasks">

                    <mat-card class="list-card" appearance="outlined">

                        <mat-card-content class="list-card-content">

                            <input type="checkbox" [(ngModel)]="task.completed" (change)="toggleTaskCompletion(task)"
                                name="completed_{{task.id}}" />
                            <span [class.completed]="task.completed">{{ task.title }}</span>
                            <span [class.completed]="task.completed">{{ task.level }}</span>
                            <span [class.completed]="task.completed">{{ task.deadLine }}</span>

                            <button mat-raised-button color="warn" (click)="deleteTask(task.id)">Törlés</button>

                        </mat-card-content>
                    </mat-card>

                </li>
            </ul>
        </div>
    </div>
</div>